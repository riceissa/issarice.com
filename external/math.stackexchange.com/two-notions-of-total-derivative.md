answer for https://math.stackexchange.com/questions/614692/two-notions-of-total-derivative

----

(1) Yes, you can interpret this as a definition for the _notation_ $\frac{dg}{dx_j}$. As I explain in (3) below, this is just a special case of the first definition of total derivative that you give, so it's not actually defining a new concept; rather, we're just giving a new notation for a thing we already know about.

(2) I think this second notion of total derivative can be used in general for multivariable functions $g : \mathbb R^n \to \mathbb R^m$, but in practice I have only ever seen it used for functions with type $\mathbb R^n \to \mathbb R$ (i.e. where the output is a scalar).

(3) The two are very much related: the second notion is a special case of the first notion. To make this simpler to type, let's call the first notion of total derivative "total derivative(1)", and the second notion of total derivative "total derivative(2)".

Then the relationship between the two is this: total derivative(2) is the special case of total derivative(1) when the intermediate layer of variables ($x_1, \ldots, x_n$ in your example) are all functions of a single variable ($x_j$ in your example).

To make sense of this, here is an example: consider a function $w = f(x,y,t)$, where $x=g(t)$ and $y=h(t)$ are also functions of $t$. This fits the special case mentioned above: the intermediate layer variables ($x,y,t$) are all functions of a single variable ($t$). This must mean that the total derivative(1) of $w$ is the same as the total derivative(2) of $w$.

The total derivative(1) of $w$ can be computed using the multivariable chain rule. To explicitly show the composition, we can define a function $\phi(t) = (g(t), h(t), t)$ so that $w = f(\phi(t))$. By the [multivariable chain rule](https://en.wikipedia.org/wiki/Chain_rule#General_rule), $$D_t w = D_t (f \circ \phi) = D_{\phi(t)} f \circ D_t\phi$$ What does this mean? In general (if we elide the distinction between a linear map and a matrix representing that map), the total derivative(1) is a matrix of partial derivatives. We know that $\phi$ is a function of a single variable $t$, so the total derivative(1) $D_t\phi$ is a vector of the derivatives of the component functions (a.k.a. 3 by 1 matrix of partial derivatives), i.e. $D_t \phi = (\frac{dg}{dt}, \frac{dh}{dt}, \frac{dt}{dt}) = (g'(t), h'(t), 1)$. And we know $f$ is a function $\mathbb R^3 \to \mathbb R$, so the total derivative(1) is the gradient (a.k.a. 1 by 3 matrix of partial derivatives), i.e. $D_{\phi(t)} f = \nabla f(\phi(t)) = (\frac{\partial f}{\partial x}, \frac{\partial f}{\partial y}, \frac{\partial f}{\partial t})$. The composition $\circ$ on the right-hand side of the chain rule tells us to interpret this expression as a composition of linear maps, i.e. matrix multiplication. Our matrices are 1 by 3 and 3 by 1, so we can think of the matrix multiplication as a dot product: $$\begin{align}D_t w &= \begin{pmatrix}\frac{\partial f}{\partial x} & \frac{\partial f}{\partial y} & \frac{\partial f}{\partial t}\end{pmatrix} \begin{pmatrix}\frac{dg}{dt}\\ \frac{dh}{dt}\\ \frac{dt}{dt}\end{pmatrix} \\ &= \left(\frac{\partial f}{\partial x}, \frac{\partial f}{\partial y}, \frac{\partial f}{\partial t}\right) \cdot \left(\frac{dg}{dt}, \frac{dh}{dt}, \frac{dt}{dt}\right) \\ &= \frac{\partial f}{\partial x}\frac{dg}{dt} + \frac{\partial f}{\partial y}\frac{dh}{dt} + \frac{\partial f}{\partial t}\frac{dt}{dt}\end{align}$$

Now let's compute the total derivative(2) of $w$. We have $$\frac{dw}{dt} = \frac{\partial f}{\partial x}\frac{dx}{dt} + \frac{\partial f}{\partial y}\frac{dy}{dt} + \frac{\partial t}{\partial t}\frac{dt}{dt}$$ But $\frac{dx}{dt} = \frac{dg}{dt}$ since $x = g(t)$, and $\frac{dy}{dt} = \frac{dh}{dt}$ since $y = h(t)$. Thus the total derivative(1) and total derivative(2) are equal.

However, total derivative(2) only makes sense in the case where the intermediate layer variables are all a function of some single variable. If this is not the case, then expressions like $\frac{dx_1}{dx_j}$ don't make sense since $x_1$ and $x_j$ are allowed to vary independently (because we didn't assume any functional relationship between them). Total derivative(1) makes sense even in this case (if $g : \mathbb R^n \to \mathbb R$ then it's just the gradient).
